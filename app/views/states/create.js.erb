$('#state_new').html('<%= escape_javascript(render :partial =>'states/show')%>');
if ('<%= @bandera%>' == "blank")
{ $('#advertencia_new').html('<%= escape_javascript('ATENCION: Faltan datos por ingresar')%>');
  if ('<%= @met_val_descrip%>' == "blank")
  { document.getElementById("states_index_met_val_descrip").style.border="1px solid #dc143c";
    document.getElementById("states_index_met_val_descrip").focus();
  }
  else
  { document.getElementById("states_index_met_val_descrip").style.border="1px solid #ddd";
    document.getElementById("states_index_met_val_unit").focus();
  }
}
else
{ if ('<%= @bandera%>' == "exist")
  { $('#advertencia_new').html('<%= escape_javascript("#{@estado.met_val_descrip}"+' ya existe, por favor ingrese otro nombre')%>');
    document.getElementById("states_index_met_val_descrip").style.border="1px solid #dc143c";
    $("#states_index_met_val_descrip").val("");
    document.getElementById("states_index_met_val_descrip").focus();
  }
}

    if ('<%= @met_val_unit%>' == "blank")
    { document.getElementById("states_index_met_val_unit").style.border="1px solid #dc143c";}
    else
    { document.getElementById("states_index_met_val_unit").style.border="1px solid #ddd";}

function trim(cadena)
{
var retorno = cadena.replace(/^(\s)*/,"").replace(/(\s)*$/,"").replace(/(\s+)/g," ");
$("#states_index_met_val_descrip").val(retorno);
//alert(retorno);
}

document.getElementById("advertencia_new").style.color="#F50E0E";
$('#state_new').dialog({
  resizable: false,
  height: 'auto',
  width: 'auto',
  title: "Nuevo",
  modal: true,
  buttons: {
                "OK" : function()
                {
                    $("#state_new").dialog("close");
                    trim(document.getElementById("states_index_met_val_descrip").value);
                }
            }
});